{% extends "dj/_base.html" %}

{% block content %}
<h1 class="text-center">Add songs</h1>
<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Search</h3>
  </div>
  <div class="panel-body">
    <form method="post" action="#">{% csrf_token %}
      {% if results %}
      <div class="row">
        <div class="col-xs-6">
          <div class="input-group">
            <span class="input-group-addon">Title</span>
            <input type="text" name="title" class="form-control" placeholder="mandatory" required>
          </div>
        </div>
        <div class="col-xs-6">
          <div class="input-group">
            <span class="input-group-addon">Artist</span>
            <input type="text" name="artist" class="form-control" placeholder="optional">
          </div>
        </div>
      </div>
      </br>
      <!-- for site in results --!>
      <div class="panel-group" id="accordion">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#tab-youtube">
                Youtube
              </a>
            </h4>
          </div>
          <div id="tab-youtube" class="panel-collapse collapse in">
            <div class="panel-body">
              {% for r in results %} <!-- in site --!>
              <button type="submit" name="link" value="{{r.link}}" class="btn btn-success btn-xs">
                <span class="glyphicon glyphicon-cloud-upload"></span>
              </button>
              {{r.title}} (<a href="https://www.youtube.com/watch?v={{r.link}}">{{r.link}}</a>)
              <br/>
              <br/>
              {% endfor %}
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#tab-grooveshark">
                Grooveshark
              </a>
            </h4>
          </div>
          <div id="tab-grooveshark" class="panel-collapse collapse in">
            <div class="panel-body">
              Soon.
            </div>
          </div>
        </div>
      </div>
      {% else %}
      <div class="row">
        <div class="col-xs-10">
          <div class="input-group">
            <span class="input-group-addon"><span class="glyphicon glyphicon-expand"></span></span>
            <input type="text" name="search" class="form-control"
            placeholder="Search term or youtube link" required>
          </div>
        </div>
        <div class="col-xs-2">
          <button type="submit" class="btn btn-default" style="width: 100%">Search</button>
        </div>
      </div>
      {% endif %}
    </div>
  </form>
</div>
<div class="panel panel-default">
  <div class="panel-heading"><h3 class="panel-title">Upload</h3></div>
  <div class="panel-body">
    <form method="post" action="#" enctype="multipart/form-data">{% csrf_token %}
      <div class="row">
        <div class="col-xs-6">
          <div class="input-group">
            <span class="input-group-addon">Title</span>
            <input type="text" name="title" class="form-control" placeholder="mandatory" required>
          </div>
        </div>
        <div class="col-xs-6">
          <div class="input-group">
            <span class="input-group-addon">Artist</span>
            <input type="text" name="artist" class="form-control" placeholder="optional">
          </div>
        </div>
      </div>
      <br/>
      <div class="row">
        <div class="col-xs-10">
          <div class="input-group">
            <span class="input-group-addon">File</span>
            <input type="file" name="file" class="filestyle" data-buttonText="">
          </div>
        </div>
        <div class="col-xs-2">
          <button class="btn btn-default" type="submit" style="width: 100%">Upload</button>
        </div>
      </div>
    </form>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading"><h3 class="panel-title">Songs waiting for validation</h3></div>
  <div class="panel-body">
    {% for song in pending %}
    {% if song.artist %}{{song.artist}} - {% endif %} {{song.title}}
    <span style="float: right"><a href="https://www.youtube.com/watch?v={{song.link}}">{{song.link}}</a></span><br/>
    {% endfor %}
  </div>
</div>
{% endblock content %}
